<script>
    var map = L.map('map', { zoomControl: false }).setView([49.265571, 35.091304], 6);

    // Додаємо базовий шар з OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

    // Створюємо полігон маски
    var outer = [
        [90, -180], [90, 180], [-90, 180], [-90, -180]  // Весь світ
    ];

    var ukraine = [
        [52.379, 22.137], [52.379, 40.227], [44.386, 40.227], [44.386, 22.137]  // Контур України
    ];

    // Створюємо інверсійний полігон (зовнішній - білий, Україна - прозора)
    L.polygon([outer, ukraine], {
        color: 'white',
        fillOpacity: 1,
        stroke: false
    }).addTo(map);

    // Додавання маркерів для тесту
    var markersData = [
        { name: "Agricultural firm 'Noviy Shlyach'", coords: [49.265571, 35.091304], type: "minor damage", link: "https://www.ukrinform.ua/rubric-ato/3771323-zagarbniki-za-dobu-obstrilala-pat-rajoniv-harkivsini.html", image: "https://atn.ua/assets/uploads/2023/10/38-6.jpg" },
        { name: "Field", coords: [50.261286, 36.42344], type: "minor damage", link: "https://www.ukrinform.ua/rubric-regions/3770050-na-harkivsini-vnoci-vorog-zavdav-raketnogo-udaru-po-pecenigah.html", image: "https://static.ukrinform.com/photos/2023_08/thumb_files/630_360_1691651661-787.jpg" }
    ];

    var markers = [];
    markersData.forEach(function (data) {
        var marker = L.marker(data.coords).bindPopup(`
            <div style="max-width: 250px;">
                <a href="${data.link}" target="_blank">${data.name}</a>
                <img src="${data.image}" style="width: 100%; border-radius: 5px;">
            </div>
        `).addTo(map);
        markers.push(marker);
    });

    // Приховування пошукового списку при натисканні на карту
    map.on('click', function () {
        document.getElementById('search-results').style.display = 'none';
    });
</script>
